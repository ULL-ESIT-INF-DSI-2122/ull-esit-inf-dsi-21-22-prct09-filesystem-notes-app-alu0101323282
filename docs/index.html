<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Informe Práctica 9</title><meta name="description" content="Documentation for Informe Práctica 9"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Informe Práctica 9</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> Informe Práctica 9 </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#práctica-9---práctica-9---aplicación-de-procesamiento-de-notas-de-texto" id="práctica-9---práctica-9---aplicación-de-procesamiento-de-notas-de-texto" style="color: inherit; text-decoration: none;">
  <h1><strong>Práctica 9 - Práctica 9 - Aplicación de procesamiento de notas de texto</strong></h1>
</a>

<a href="#marc-carbonell-gonzález-de-chaves" id="marc-carbonell-gonzález-de-chaves" style="color: inherit; text-decoration: none;">
  <h3>Marc Carbonell González de Chaves</h3>
</a>
<p>  <a href="https://github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-alu0101323282/actions/workflows/tests.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-alu0101323282/actions/workflows/tests.yml/badge.svg" alt="Tests"></a>
  <a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-alu0101323282?branch=main"><img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-alu0101323282/badge.svg?branch=main" alt="Coverage Status"></a>
  <a href="https://sonarcloud.io/summary/new_code?id=ULL-ESIT-INF-DSI-2122_ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-alu0101323282"><img src="https://sonarcloud.io/api/project_badges/measure?project=ULL-ESIT-INF-DSI-2122_ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-alu0101323282&metric=alert_status" alt="Quality Gate Status"></a></p>

<a href="#tareas-previas" id="tareas-previas" style="color: inherit; text-decoration: none;">
  <h2><strong>Tareas previas</strong></h2>
</a>
<ol>
<li>Acepté la <a href="https://classroom.github.com/a/8yO8h5vy">asignación de Github Classroom</a>.</li>
<li>Durante el desarrollo de la práctica utilicé <a href="https://www.npmjs.com/package/yargs">yargs</a> y <a href="https://www.npmjs.com/package/chalk">chalk</a>.</li>
<li>Me familiaricé con el <a href="https://nodejs.org/dist/latest-v18.x/docs/api/fs.html#synchronous-api">API síncrona proporcionada por Node.js para trabajar con el sistema de ficheros</a>.</li>
</ol>

<a href="#planteamiento" id="planteamiento" style="color: inherit; text-decoration: none;">
  <h2><strong>Planteamiento</strong></h2>
</a>
<p>  Para este ejercicio he desarrollado una única clase <code>Note</code> que contiene las propiedades de una nota es decir, usuario creador, título, cuerpo y color de la nota. Esta clase
  contiene getters para cada una de las cuatro propiedades y un método <code>deserialized()</code> para convertir notas en formato json en objetos <code>Note</code>.</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Note</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">constructor</span><span class="hl-1">(</span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-2">readonly</span><span class="hl-1"> </span><span class="hl-4">user</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">, </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-2">readonly</span><span class="hl-1"> </span><span class="hl-4">title</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-2">readonly</span><span class="hl-1"> </span><span class="hl-4">body</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">, </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-2">readonly</span><span class="hl-1"> </span><span class="hl-4">color</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">) {}</span><br/><span class="hl-1">  </span><span class="hl-5">getUser</span><span class="hl-1">(): </span><span class="hl-3">string</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-5">getTitle</span><span class="hl-1">(): </span><span class="hl-3">string</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-5">getBody</span><span class="hl-1">(): </span><span class="hl-3">string</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-5">getColor</span><span class="hl-1">(): </span><span class="hl-3">string</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-2">static</span><span class="hl-1"> </span><span class="hl-5">deserialize</span><span class="hl-1">(</span><span class="hl-4">note</span><span class="hl-1">: </span><span class="hl-3">NoteInterface</span><span class="hl-1">): </span><span class="hl-3">Note</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-5">Note</span><span class="hl-1">(</span><span class="hl-4">note</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">, </span><span class="hl-4">note</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">, </span><span class="hl-4">note</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1">, </span><span class="hl-4">note</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Cabe señalar que para el correcto funcionamiento de este último método he creado también una interfaz NoteInterfaze que contine las propiedades de una nota.</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">interface</span><span class="hl-1"> </span><span class="hl-3">NoteInterface</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">user</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">title</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">body</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">color</span><span class="hl-1">: </span><span class="hl-3">string</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#comandos" id="comandos" style="color: inherit; text-decoration: none;">
  <h2><strong>Comandos</strong></h2>
</a>
<p> Para cada una de las funcionalidades de la aplicación de procesamiento de notas de texto, es decir, crear, modificar, eliminar, leer y listar notas, 
 he creado un commando utilizando <a href="https://www.npmjs.com/package/yargs">yargs</a>. Todos estos comandos utilizan funciones asíncronas para su funcionamiento así como el paquete
 chalks para mostrar los mensajes en el color correspondiente en cada caso.</p>

<a href="#crear-notas" id="crear-notas" style="color: inherit; text-decoration: none;">
  <h3><strong>Crear notas</strong></h3>
</a>
<p> Para la creación de nuevas notas he creado el comando <code>add</code> que recibe como parámetros obligatorios el nombre del usuario que quiere crear la nota <code>user</code>, el título de
 la nota <code>title</code>, el cuerpo de la nota <code>body</code>, y el color de la nota <code>color</code>. De esta manera, tras recibir estos parámetros, la función asíncrona <code>readdir</code> lee el directorio
 de notas perteneciente al usuario que quiere crear la nota, en caso de error se procede ha crear dicho directorio mediante <code>mkdir</code> y ha crear la nota
 dentro del mismo con <code>writeFile</code>. En caso contrario se comprueba si existe ya una nota con ese mismo nombre dentro del directorio, si dicha nota ya existe se devuelve un 
 mensaje de error, y si no se procede a crear la nueva nota mediante <code>writeFile</code>.</p>
<pre><code class="language-typescript"><span class="hl-4">yargs</span><span class="hl-1">.</span><span class="hl-5">command</span><span class="hl-1">({</span><br/><span class="hl-1"> </span><span class="hl-4">command:</span><span class="hl-1"> </span><span class="hl-6">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1"> </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Add a new note&#39;</span><span class="hl-1">,</span><br/><span class="hl-1"> </span><span class="hl-4">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">   </span><span class="hl-4">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;User name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">   },</span><br/><span class="hl-1">   </span><span class="hl-4">title:</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Note title&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">   },</span><br/><span class="hl-1">   </span><span class="hl-4">body:</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Note body&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">   },</span><br/><span class="hl-1">   </span><span class="hl-4">color:</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Note color&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">   },</span><br/><span class="hl-1"> },</span><br/><span class="hl-1"> </span><span class="hl-5">handler</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">   </span><span class="hl-5">readdir</span><span class="hl-1">(</span><span class="hl-6">`src/Notas/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-6">`</span><span class="hl-1">, (</span><span class="hl-4">err</span><span class="hl-1">, </span><span class="hl-4">files</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">err</span><span class="hl-1">) {</span><br/><span class="hl-1">       </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">         </span><span class="hl-5">mkdir</span><span class="hl-1">(</span><span class="hl-6">`src/Notas/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-6">`</span><span class="hl-1">, {</span><span class="hl-4">recursive:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">}, (</span><span class="hl-4">err</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">           </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">err</span><span class="hl-1">) </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-4">err</span><span class="hl-1">;</span><br/><span class="hl-1">         });</span><br/><span class="hl-1">         </span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">, </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">, </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1">, </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">);</span><br/><span class="hl-1">       }</span><br/><span class="hl-1">     } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">       </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">alreadyExists</span><span class="hl-1">: </span><span class="hl-3">boolean</span><span class="hl-1"> = </span><span class="hl-2">false</span><span class="hl-1">;</span><br/><span class="hl-1">       </span><span class="hl-4">files</span><span class="hl-1">.</span><span class="hl-5">forEach</span><span class="hl-1">((</span><span class="hl-4">file</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">         </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">file</span><span class="hl-1"> === </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1"> + </span><span class="hl-6">&#39;.json&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">           </span><span class="hl-4">alreadyExists</span><span class="hl-1"> = </span><span class="hl-2">true</span><span class="hl-1">;</span><br/><span class="hl-1">         }</span><br/><span class="hl-1">       });</span><br/><span class="hl-1">       </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">alreadyExists</span><span class="hl-1">) {</span><br/><span class="hl-1">         </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-6">&#39;There is already a note with that name&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">         </span><span class="hl-4">alreadyExists</span><span class="hl-1"> = </span><span class="hl-2">false</span><span class="hl-1">;</span><br/><span class="hl-1">       } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">         </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">           </span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">, </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">, </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1">, </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">);</span><br/><span class="hl-1">         }</span><br/><span class="hl-1">       }</span><br/><span class="hl-1">     }</span><br/><span class="hl-1">   });</span><br/><span class="hl-1"> },</span><br/><span class="hl-1">});</span>
</code></pre>

<a href="#modificar-notas" id="modificar-notas" style="color: inherit; text-decoration: none;">
  <h3><strong>Modificar notas</strong></h3>
</a>
<p> En el caso de la modificación de notas he creado el comando <code>edit</code> que recibe como parámetros obligatorios el nombre del usuario que quiere modificar la nota <code>user</code>, el título de
 la nota <code>title</code>, el cuerpo de la nota <code>body</code>, y el color de la nota <code>color</code>, y como parámetro opcional un nuevo título <code>newTitle</code>. En primer lugar, tras recibir los parámetros,
 se comprueba mediante la función <code>existsSync</code> que la nota que se quiere editar existe, en caso contrario se muestra un mensaje de error. Si la nota a editar si existe
 se comprueba si se ha pasado como parámetro un nuevo título para dicha nota, en cuyo caso, tras comprobar si no existe ya una nota con ese mismo nombre dentro del directorio (utilizando
 la función <code>readdir</code>) , se procede a renombrar la nota con <code>rename</code> y a sobreescribir sus propiedades con <code>writeFile</code>. Si no se indica un nuevo título para la nota esta se reescribe directamente con <code>writeFile</code>.</p>
<pre><code class="language-typescript"><span class="hl-4">yargs</span><span class="hl-1">.</span><span class="hl-5">command</span><span class="hl-1">({</span><br/><span class="hl-1"> </span><span class="hl-4">command:</span><span class="hl-1"> </span><span class="hl-6">&#39;edit&#39;</span><span class="hl-1">,</span><br/><span class="hl-1"> </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Edit a note&#39;</span><span class="hl-1">,</span><br/><span class="hl-1"> </span><span class="hl-4">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">   </span><span class="hl-4">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;User name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">   },</span><br/><span class="hl-1">   </span><span class="hl-4">title:</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Note title&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">   },</span><br/><span class="hl-1">   </span><span class="hl-4">newTitle:</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;New note title&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">false</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">   },</span><br/><span class="hl-1">   </span><span class="hl-4">body:</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Note body&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">   },</span><br/><span class="hl-1">   </span><span class="hl-4">color:</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Note color&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">   },</span><br/><span class="hl-1"> },</span><br/><span class="hl-1"> </span><span class="hl-5">handler</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">   </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-5">existsSync</span><span class="hl-1">(</span><span class="hl-6">`src/Notas/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-6">/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">title</span><span class="hl-2">}</span><span class="hl-6">.json`</span><span class="hl-1">)) {</span><br/><span class="hl-1">     </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">newTitle</span><span class="hl-1">) {</span><br/><span class="hl-1">       </span><span class="hl-5">readdir</span><span class="hl-1">(</span><span class="hl-6">`src/Notas/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-6">`</span><span class="hl-1">, (</span><span class="hl-4">err</span><span class="hl-1">, </span><span class="hl-4">files</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">         </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">err</span><span class="hl-1">) {</span><br/><span class="hl-1">           </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-4">err</span><span class="hl-1">;</span><br/><span class="hl-1">         } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">           </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">alreadyExists</span><span class="hl-1">: </span><span class="hl-3">boolean</span><span class="hl-1"> = </span><span class="hl-2">false</span><span class="hl-1">;</span><br/><span class="hl-1">           </span><span class="hl-4">files</span><span class="hl-1">.</span><span class="hl-5">forEach</span><span class="hl-1">((</span><span class="hl-4">file</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">             </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">file</span><span class="hl-1"> === </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">newTitle</span><span class="hl-1"> + </span><span class="hl-6">&#39;.json&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">               </span><span class="hl-4">alreadyExists</span><span class="hl-1"> = </span><span class="hl-2">true</span><span class="hl-1">;</span><br/><span class="hl-1">             }</span><br/><span class="hl-1">           });</span><br/><span class="hl-1">           </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">alreadyExists</span><span class="hl-1">) {</span><br/><span class="hl-1">             </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-6">&#39;There is already a note with that name&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">           } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">             </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">newTitle</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">               </span><span class="hl-5">rename</span><span class="hl-1">(</span><span class="hl-6">`src/Notas/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-6">/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">title</span><span class="hl-2">}</span><span class="hl-6">.json`</span><span class="hl-1">, </span><span class="hl-6">`src/Notas/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-6">/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">newTitle</span><span class="hl-2">}</span><span class="hl-6">.json`</span><span class="hl-1">, (</span><span class="hl-4">err</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                 </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">err</span><span class="hl-1">) </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-4">err</span><span class="hl-1">;</span><br/><span class="hl-1">               });</span><br/><span class="hl-1">               </span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">, </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">newTitle</span><span class="hl-1">, </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1">, </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">, </span><span class="hl-2">false</span><span class="hl-1">);</span><br/><span class="hl-1">             }</span><br/><span class="hl-1">           }</span><br/><span class="hl-1">         }</span><br/><span class="hl-1">       });</span><br/><span class="hl-1">     } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">       </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">         </span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">, </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">, </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1">, </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">, </span><span class="hl-2">false</span><span class="hl-1">);</span><br/><span class="hl-1">       }</span><br/><span class="hl-1">     }</span><br/><span class="hl-1">   } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-6">&#39;Note not found&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">   }</span><br/><span class="hl-1"> },</span><br/><span class="hl-1">});</span>
</code></pre>
<p>*Función write utilizada en los comandos <code>add</code> y <code>edit</code>:</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">function</span><span class="hl-1"> </span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">, </span><span class="hl-4">title</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">, </span><span class="hl-4">body</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">, </span><span class="hl-4">color</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">, </span><span class="hl-4">command</span><span class="hl-1">: </span><span class="hl-3">boolean</span><span class="hl-1"> = </span><span class="hl-2">true</span><span class="hl-1">): </span><span class="hl-3">void</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">writeFile</span><span class="hl-1">(</span><span class="hl-6">`src/Notas/</span><span class="hl-2">${</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-6">/</span><span class="hl-2">${</span><span class="hl-4">title</span><span class="hl-2">}</span><span class="hl-6">.json`</span><span class="hl-1">, </span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">(</span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-5">Note</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">, </span><span class="hl-4">title</span><span class="hl-1">, </span><span class="hl-4">body</span><span class="hl-1">, </span><span class="hl-4">color</span><span class="hl-1">)), (</span><span class="hl-4">err</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">err</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-6">&#39;Something went wrong when writing your file&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">command</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-6">`Note created!`</span><span class="hl-1">));</span><br/><span class="hl-1">      } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-6">`Note edited!`</span><span class="hl-1">));</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#borrar-notas" id="borrar-notas" style="color: inherit; text-decoration: none;">
  <h3><strong>Borrar notas</strong></h3>
</a>
<p>Para el borrado de notas he creado el comando <code>remove</code> que recibe como parámetros obligatorios el nombre del usuario que quiere borrar la nota <code>user</code> y el título de
la nota <code>title</code>. Este comando comprueba con la función <code>existsSync</code> que la nota indicada existe y la elimina mediante <code>rm</code>. En caso contrario muestra un mensaje de error.</p>
<pre><code class="language-typescript"><span class="hl-4">yargs</span><span class="hl-1">.</span><span class="hl-5">command</span><span class="hl-1">({</span><br/><span class="hl-1"> </span><span class="hl-4">command:</span><span class="hl-1"> </span><span class="hl-6">&#39;remove&#39;</span><span class="hl-1">,</span><br/><span class="hl-1"> </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Remove a note&#39;</span><span class="hl-1">,</span><br/><span class="hl-1"> </span><span class="hl-4">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">   </span><span class="hl-4">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;User name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">   },</span><br/><span class="hl-1">   </span><span class="hl-4">title:</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Note title&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">   },</span><br/><span class="hl-1"> },</span><br/><span class="hl-1"> </span><span class="hl-5">handler</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">   </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-5">existsSync</span><span class="hl-1">(</span><span class="hl-6">`src/Notas/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-6">/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">title</span><span class="hl-2">}</span><span class="hl-6">.json`</span><span class="hl-1">)) {</span><br/><span class="hl-1">     </span><span class="hl-5">rm</span><span class="hl-1">(</span><span class="hl-6">`src/Notas/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-6">/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">title</span><span class="hl-2">}</span><span class="hl-6">.json`</span><span class="hl-1">, (</span><span class="hl-4">err</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">       </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">err</span><span class="hl-1">) {</span><br/><span class="hl-1">         </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-4">err</span><span class="hl-1">;</span><br/><span class="hl-1">       } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">         </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-6">&#39;Note removed!&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">       }</span><br/><span class="hl-1">     });</span><br/><span class="hl-1">   } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-6">&#39;Note not found&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">   }</span><br/><span class="hl-1"> },</span><br/><span class="hl-1">});</span>
</code></pre>

<a href="#leer-notas" id="leer-notas" style="color: inherit; text-decoration: none;">
  <h3><strong>Leer notas</strong></h3>
</a>
<p>Para leer el contenido de las notas he creado el comando <code>read</code> que recibe como parámetros obligatorios el nombre del usuario que quiere leer la nota <code>user</code> y el título de
la nota <code>title</code>. Este comando comprueba con la función <code>existsSync</code> que la nota indicada existe y extrae la información del fichero con <code>readFile</code>. La nota obtenida en formato
json es deserializada con el método <code>deserialize()</code> de la clase <code>Note</code> para poder extraer sus propiedades mediante los getters correspondientes, y, mediante un <code>switch</code>, 
se muestra por pantalla el título y contenido de la nota en su color correspondiente. En caso de que la nota a leer no exista se muestra un mensaje de error.</p>
<pre><code class="language-typescript"><span class="hl-4">yargs</span><span class="hl-1">.</span><span class="hl-5">command</span><span class="hl-1">({</span><br/><span class="hl-1"> </span><span class="hl-4">command:</span><span class="hl-1"> </span><span class="hl-6">&#39;read&#39;</span><span class="hl-1">,</span><br/><span class="hl-1"> </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Read a note&#39;</span><span class="hl-1">,</span><br/><span class="hl-1"> </span><span class="hl-4">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">   </span><span class="hl-4">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;User name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">   },</span><br/><span class="hl-1">   </span><span class="hl-4">title:</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Note title&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">   },</span><br/><span class="hl-1"> },</span><br/><span class="hl-1"> </span><span class="hl-5">handler</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">   </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-5">existsSync</span><span class="hl-1">(</span><span class="hl-6">`src/Notas/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-6">/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">title</span><span class="hl-2">}</span><span class="hl-6">.json`</span><span class="hl-1">)) {</span><br/><span class="hl-1">     </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">       </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-6">&#39;Your notes&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">       </span><span class="hl-5">readFile</span><span class="hl-1">(</span><span class="hl-6">`src/Notas/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-6">/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">title</span><span class="hl-2">}</span><span class="hl-6">.json`</span><span class="hl-1">, (</span><span class="hl-4">err</span><span class="hl-1">, </span><span class="hl-4">data</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">         </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">err</span><span class="hl-1">) {</span><br/><span class="hl-1">           </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-6">&#39;There must be a problem with the file you are trying to read&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">         } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">           </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">note</span><span class="hl-1">: </span><span class="hl-3">Note</span><span class="hl-1"> = </span><span class="hl-4">Note</span><span class="hl-1">.</span><span class="hl-5">deserialize</span><span class="hl-1">(</span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">()));</span><br/><span class="hl-1">           </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">color</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-4">note</span><span class="hl-1">.</span><span class="hl-5">getColor</span><span class="hl-1">();</span><br/><span class="hl-1">           </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">body</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-4">note</span><span class="hl-1">.</span><span class="hl-5">getBody</span><span class="hl-1">();</span><br/><span class="hl-1">           </span><span class="hl-0">switch</span><span class="hl-1"> (</span><span class="hl-4">color</span><span class="hl-1">) {</span><br/><span class="hl-1">             </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1">.</span><span class="hl-8">RED</span><span class="hl-1">:</span><br/><span class="hl-1">               </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">));</span><br/><span class="hl-1">               </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-4">body</span><span class="hl-1">));</span><br/><span class="hl-1">               </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">             </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1">.</span><span class="hl-8">GREEN</span><span class="hl-1">:</span><br/><span class="hl-1">               </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">));</span><br/><span class="hl-1">               </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-4">body</span><span class="hl-1">));</span><br/><span class="hl-1">               </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">             </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1">.</span><span class="hl-8">YELLOW</span><span class="hl-1">:</span><br/><span class="hl-1">               </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">yellow</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">));</span><br/><span class="hl-1">               </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">yellow</span><span class="hl-1">(</span><span class="hl-4">body</span><span class="hl-1">));</span><br/><span class="hl-1">               </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">             </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1">.</span><span class="hl-8">BLUE</span><span class="hl-1">:</span><br/><span class="hl-1">               </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">blue</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">));</span><br/><span class="hl-1">               </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">blue</span><span class="hl-1">(</span><span class="hl-4">body</span><span class="hl-1">));</span><br/><span class="hl-1">               </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">           }</span><br/><span class="hl-1">         }</span><br/><span class="hl-1">       });</span><br/><span class="hl-1">     }</span><br/><span class="hl-1">   } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-6">&#39;Note not found&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">   }</span><br/><span class="hl-1"> },</span><br/><span class="hl-1">});</span>
</code></pre>

<a href="#listar-notas" id="listar-notas" style="color: inherit; text-decoration: none;">
  <h3><strong>Listar notas</strong></h3>
</a>
<p>Para listar las notas de un usuario he creado el comando <code>list</code> que recibe como único parámetro obligatorio el nombre del usuario que quiere listar sus notas <code>user</code>.
Este comando lee el contenido del directorio del usuario mediante <code>readdir</code>. y por cada fichero extrae su información con <code>readFile</code>, deserializa la nota con 
<code>deserialize()</code> de la clase <code>Note</code> para extraer sus propiedades y mediante un <code>switch</code> mostrar cada nota en su color correspondiente.</p>
<pre><code class="language-typescript"><span class="hl-4">yargs</span><span class="hl-1">.</span><span class="hl-5">command</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">command:</span><span class="hl-1"> </span><span class="hl-6">&#39;list&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;List user notes&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;User name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-5">handler</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1"> === </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-5">readdir</span><span class="hl-1">(</span><span class="hl-6">`src/Notas/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-6">`</span><span class="hl-1">, (</span><span class="hl-4">err</span><span class="hl-1">, </span><span class="hl-4">files</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">err</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-4">err</span><span class="hl-1">;</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-6">&#39;Your notes&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">          </span><span class="hl-4">files</span><span class="hl-1">.</span><span class="hl-5">forEach</span><span class="hl-1">((</span><span class="hl-4">file</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">readFile</span><span class="hl-1">(</span><span class="hl-6">`src/Notas/</span><span class="hl-2">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-6">/</span><span class="hl-2">${</span><span class="hl-4">file</span><span class="hl-2">}</span><span class="hl-6">`</span><span class="hl-1">, (</span><span class="hl-4">err</span><span class="hl-1">, </span><span class="hl-4">data</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">err</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-6">&#39;There must be a problem with the file you are trying to read&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">              } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">color</span><span class="hl-1"> = </span><span class="hl-4">Note</span><span class="hl-1">.</span><span class="hl-5">deserialize</span><span class="hl-1">(</span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">())).</span><span class="hl-5">getColor</span><span class="hl-1">();</span><br/><span class="hl-1">                </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">filename</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-4">file</span><span class="hl-1">.</span><span class="hl-5">substring</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">, </span><span class="hl-4">file</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1">-</span><span class="hl-9">5</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-0">switch</span><span class="hl-1"> (</span><span class="hl-4">color</span><span class="hl-1">) {</span><br/><span class="hl-1">                  </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1">.</span><span class="hl-8">RED</span><span class="hl-1">:</span><br/><span class="hl-1">                    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-4">filename</span><span class="hl-1">));</span><br/><span class="hl-1">                    </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                  </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1">.</span><span class="hl-8">GREEN</span><span class="hl-1">:</span><br/><span class="hl-1">                    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-4">filename</span><span class="hl-1">));</span><br/><span class="hl-1">                    </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                  </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1">.</span><span class="hl-8">YELLOW</span><span class="hl-1">:</span><br/><span class="hl-1">                    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">yellow</span><span class="hl-1">(</span><span class="hl-4">filename</span><span class="hl-1">));</span><br/><span class="hl-1">                    </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                  </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1">.</span><span class="hl-8">BLUE</span><span class="hl-1">:</span><br/><span class="hl-1">                    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">blue</span><span class="hl-1">(</span><span class="hl-4">filename</span><span class="hl-1">));</span><br/><span class="hl-1">                    </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">              }</span><br/><span class="hl-1">            });</span><br/><span class="hl-1">          });</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/EjercicioPE102_ReduceTemplate.html">EjercicioPE102/<wbr/>Reduce<wbr/>Template</a></li><li class=" tsd-kind-module"><a href="modules/EjercicioPE102_AddReduce.html">EjercicioPE102/<wbr/>Add<wbr/>Reduce</a></li><li class=" tsd-kind-module"><a href="modules/EjercicioPE102_SubReduce.html">EjercicioPE102/<wbr/>Sub<wbr/>Reduce</a></li><li class=" tsd-kind-module"><a href="modules/EjercicioPE102_ProdReduce.html">EjercicioPE102/<wbr/>Prod<wbr/>Reduce</a></li><li class=" tsd-kind-module"><a href="modules/EjercicioPE102_DivReduce.html">EjercicioPE102/<wbr/>Div<wbr/>Reduce</a></li><li class=" tsd-kind-module"><a href="modules/Notas_Note.html">Notas/<wbr/>Note</a></li><li class=" tsd-kind-module"><a href="modules/Notas_note_app.html">Notas/note-<wbr/>app</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>